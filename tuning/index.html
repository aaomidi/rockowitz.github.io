<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Sanford Rockowitz">
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Instrumentation and Tuning - ddcutil Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Instrumentation and Tuning";
    var mkdocs_page_input_path = "tuning.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> ddcutil Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Overview</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Using ddcutil</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../commands/">Command Overview</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../cmdargs/">Command Arguments</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../cmdopts/">Command Specific Options</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../cmd_output/">Command Output Examples</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Examples</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../vcpinfo_output/">ddcutil vcpinfo example</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../detect_verbose_output/">ddcutil detect example</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../cap_u3011_verbose_output/">ddcutil capabilities example</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../getvcp_known_u3011_output/">ddcutil getvcp example</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../mccs_background/">Monitor Control Command Set</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../colormgt/">Color Management</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Instrumentation and Tuning</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#option-ddc">Option --ddc</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#option-stats">Option --stats</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#option-maxtries">Option --maxtries</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#option-force-slave-address">Option --force-slave-address</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#option-nodetect">Option --nodetect</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#option-async">Option --async</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#option-force">Option --force</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../table_features/">Table Type Features</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../usb/">USB Connected Monitors</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Installation and Configuration</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../install/">Install ddcutil From Prebuilt Packages</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../building/">Building From Source</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../building_ddcui/">Building ddcui</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../shared_lib_config/">Shared Library Configuration</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../adl/">AMD fglrx Driver</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../config/">Configuration and Installation Diagnostics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../i2c_permissions/">Device Permissions</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../kernel_module/">Kernel Module Configuration</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../nvidia/">Special Nvidia Driver Settings</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../virtual_machines/">Virtual Machines</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../raspberry/">Raspberry Pi</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">ddcui</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../ddcui_main/">Overview</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../building_ddcui/">Building ddcui</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Additional Topics</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../faq/">Frequently Asked Questions</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../monitor_notes/">Notes on specific monitors</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../quirks/">Notes on Particular Configurations</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../tech_support/">Technical Support</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../feedback/">Feedback</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../releases/">Releases</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../release_notes/">Release Notes</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../prior_announcements/">Announcement History</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../ddccontrol/">Comparison with ddccontrol</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../ddc_null_response/">DDC Null Message</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">API</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../api_main/">C API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../c_api_90/">C API Changes for Release 0.9.0</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../c_api_93/">C API Changes for Release 0.9.3</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../c_api_95/">C API Changes for Release 0.9.5</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../c_api_96/">C API Changes for Release 0.9.6</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../c_api_98/">C API Changes for Release 0.9.8</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../python_api/">Python API Overview</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../todo/">Future Tasks</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../bibliography/">References</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../acknowledgements/">Acknowledgements</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">ddcui</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../ddcui_main/">Overview</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">ddcutil Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Using ddcutil &raquo;</li>
        
      
    
    <li>Instrumentation and Tuning</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/rockowitz/ddcutil/edit/master/docs/tuning.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="instrumentation-and-tuning">Instrumentation and Tuning</h2>
<p><strong>ddcutil</strong> has extensive facilities for reporting DDC protocol errors 
and peformance statistics, and some ability to tweak execution parameters from
the command line.</p>
<p>I2C is an inherently unreliable protocol, requiring retry management.  Furthermore, 90% of
ddcutil's elapsed time is spent in timeouts mandated by the DDC specification.    </p>
<p>The relevant options are:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td>--stats</td>
<td>Report execution statistics</td>
</tr>
<tr>
<td>--ddc</td>
<td>Report DDC protocol errors</td>
</tr>
<tr>
<td>--maxtries()</td>
<td>Set maximum tries</td>
</tr>
<tr>
<td>--force-slave-address</td>
<td>Force control of I2C slave addresses</td>
</tr>
<tr>
<td>--force</td>
<td>Relax various internal checks</td>
</tr>
<tr>
<td>--nodetect</td>
<td>Skip display detection (valid only with --bus)</td>
</tr>
<tr>
<td>--async</td>
<td>Execute portion of monitor detection in parallel</td>
</tr>
</tbody>
</table>
<h3 id="option-ddc">Option --ddc</h3>
<p>If option <strong>--ddc</strong> is specified, <strong>ddcutil</strong> reports protocol errors that it detects.  These may reflect I2C bus errors, or deviations by monitors from the MCCS specfication.  Most I2C errors cause a retry.  Some monitors are very clean.  Others, like the Dell P2411h, are very dirty. </p>
<h3 id="option-stats">Option --stats</h3>
<p>Option <strong>--stats</strong> causes <strong>ddcutil</strong> to report execution statistics.  It takes the following optional arguments: </p>
<table>
<thead>
<tr>
<th>--stats Argument</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>errors</td>
<td>Report I2C/DDC error counts</td>
</tr>
<tr>
<td>tries</td>
<td>Report retry statistics</td>
</tr>
<tr>
<td>calls</td>
<td>Report system call counts and time</td>
</tr>
<tr>
<td>elapsed</td>
<td>Report elapsed time</td>
</tr>
<tr>
<td>time</td>
<td>Synonum for <strong>elapsed</strong></td>
</tr>
<tr>
<td>all</td>
<td>Report all statistics</td>
</tr>
</tbody>
</table>
<p>If <strong>--stats all</strong> is specified, or no argument is given, then all statistics are output. </p>
<p><strong>--stats calls</strong> implies <strong>--stats elapsed</strong></p>
<h3 id="option-maxtries">Option --maxtries</h3>
<p>There are 3 kinds of exchanges in which retry is possible: </p>
<ul>
<li>write-only exchange.  Bytes are written with no subsequent read.<br />
  Used only to set a VCP feature value.  </li>
<li>write-read exchange.  A write to the monitor, followed by a read.<br />
  Most DDC protocol exchanges are of this form.</li>
<li>multi-part exchange.  This is a "meta" exchange, consisting multiple 
  write-read exchanges. Used to query monitor capabilities, and for 
  querying and setting Table type VCP features. </li>
</ul>
<p>By default, the maximum number of tries for each exchange is:</p>
<ul>
<li>write-only exchange:    4</li>
<li>write-read exchange:   10</li>
<li>multi-part exchange:    8</li>
</ul>
<p>Option <strong>--maxtries</strong> allows you to play with the maximum try count.  Its argument
consists of 3 comma-separated values.  The following example sets the maximum 
try counts to 3 for write-only exchanges, 6 for write-read exchanges, and 9 
for multi-part exchanges.</p>
<pre><code>--maxtries(3,6,9) 
</code></pre>

<p>A blank value leaves the corresponding try count unchanged.   The following 
example changes only the maximum write-read try count:</p>
<pre><code>--maxtries(,7,) 
</code></pre>

<p>The maximum maximum value is 15.</p>
<h3 id="option-force-slave-address">Option --force-slave-address<a name="force_slave"></a></h3>
<p>Per the DDC specification, <strong>ddcutil*<em> reads the EDID over an I2C bus using slave address x50, and performs DDC communication
using slave address x37.  Occasionally, communication cannot be established because these addresses are marked as busy.
This option allows <strong>ddcutil</strong> to take control of those slave
addresses, potentially impacting the other program.  (Internally, <strong>ddcutil</strong> uses </em></strong>ioctl(I2C_SLAVE_FORCE)<strong><em> instead of
</em></strong>ioctl(I2C_SLAVE)***.)</p>
<h3 id="option-nodetect">Option --nodetect<a name="option_nodetect"></a></h3>
<p>If a display is specified by its I2C bus number (option <strong>--bus</strong>) and option <strong>--nodetect</strong> is specified,
global display detection is skipped, improving startup time.</p>
<h3 id="option-async">Option --async<a name="option_async"></a></h3>
<p>If there are multiple monitors and option <strong>--async</strong> is specified, initial monitor checks are performed in separate threads.
improving startup time.  </p>
<h3 id="option-force"><a name="force">Option --force</a></h3>
<p>A catchall option that allows <strong>ddcutil</strong> to continue execution despite various failure conditions.   May be fatal.  Subject to change.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../table_features/" class="btn btn-neutral float-right" title="Table Type Features">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../colormgt/" class="btn btn-neutral" title="Color Management"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/rockowitz/ddcutil/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../colormgt/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../table_features/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
